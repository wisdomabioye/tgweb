{"version":3,"sources":["../../../src/service/networker/net-message.js"],"names":["NetMessage","constructor","seq_no","body","acked","msg_id","container","deferred","copyHelper","value","key","copyOptions","options","size","Uint8Array","byteLength","length","NetContainer","inner"],"mappings":";;;;;;;AAEA;;;;AAEA;;AACA;;;;;;AAIO,MAAMA,UAAN,CAAiB;AAQtBC,cAAYC,MAAZ,EAA4BC,IAA5B,EAA6C;AAAA,SAJ7CC,KAI6C,GAJ5B,KAI4B;AAAA,SAH7CC,MAG6C,GAH5B,8BAG4B;AAAA,SAF7CC,SAE6C,GAFxB,KAEwB;AAAA,SAD7CC,QAC6C,GADlC,sBACkC;;AAAA,SAO7CC,UAP6C,GAOhC,CAACC,KAAD,EAAaC,GAAb,KAA6B;AACxC;AACA,WAAKA,GAAL,IAAYD,KAAZ;AACD,KAV4C;;AAC3C,SAAKP,MAAL,GAAcA,MAAd;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACD;AACDQ,cAAYC,OAAZ,EAA6B;AAAE;AAC7B,qCAAkB,KAAKJ,UAAvB,EAAmCI,OAAnC;AACD;;AAKDC,SAAO;AACL,QAAI,KAAKV,IAAL,YAAqBW,UAAzB,EACE,OAAO,KAAKX,IAAL,CAAUY,UAAjB,CADF,KAGE,OAAO,KAAKZ,IAAL,CAAUa,MAAjB;AACH;AAxBqB;;QAAXhB,U,GAAAA,U;AA2BN,MAAMiB,YAAN,SAA2BjB,UAA3B,CAAsC;AAE3CC,cAAYC,MAAZ,EAA4BC,IAA5B,EAA6Ce,KAA7C,EAA8D;AAC5D,UAAMhB,MAAN,EAAcC,IAAd;AACA,SAAKG,SAAL,GAAiB,IAAjB;AACA,SAAKY,KAAL,GAAaA,KAAb;AACD;AAN0C;QAAhCD,Y,GAAAA,Y","file":"net-message.js","sourcesContent":["//@flow\n\nimport forEachObjIndexed from 'ramda/src/forEachObjIndexed'\n\nimport { generateID } from '../time-manager'\nimport blueDefer from '../../util/defer'\n\ntype BodyBytes = number[] | Uint8Array\n\nexport class NetMessage {\n  body: BodyBytes\n  seq_no: number\n  isAPI: boolean\n  acked: boolean = false\n  msg_id: string = generateID()\n  container: boolean = false\n  deferred = blueDefer()\n  constructor(seq_no: number, body: BodyBytes) {\n    this.seq_no = seq_no\n    this.body = body\n  }\n  copyOptions(options: Object) { //TODO remove this\n    forEachObjIndexed(this.copyHelper, options)\n  }\n  copyHelper = (value: any, key: string) => {\n    //$FlowIssue\n    this[key] = value\n  }\n  size() {\n    if (this.body instanceof Uint8Array)\n      return this.body.byteLength\n    else\n      return this.body.length\n  }\n}\n\nexport class NetContainer extends NetMessage {\n  inner: string[]\n  constructor(seq_no: number, body: BodyBytes, inner: string[]) {\n    super(seq_no, body)\n    this.container = true\n    this.inner = inner\n  }\n}\n"]}